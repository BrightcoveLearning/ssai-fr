---
title: '' Description de l'API SSAI Ad Config Video Cloud : Dans cette rubrique, vous apprendrez comment utiliser l'API d'insertion d'annonces côté serveur (SSAI) pour créer et gérer des configurations d'annonces.
parent: Video-On-Demand
---
 <h1>Cette page a été déplacée - vous serez dirigé vers le <a href="https://apis.support.brightcove.com/ssai/getting-started/video-cloud-ssai-ad-config-api.html">nouvel emplacement</a> dans 3 secondes. Veuillez mettre à jour vos signets !</h1>
<script type="text/javascript">
var t = setTimeout (function () { window.location.href = 'https://apis.support.brightcove.com/ssai/getting-started/video-cloud-ssai-ad-config-api.html'; }, 3000) ;
</script>
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section id="top" class="bcls-section">
<p>Les configurations publicitaires définissent divers aspects de la lecture SSAI, y compris les appels publicitaires, les balises et d'autres options de configuration. Un compte peut avoir plusieurs configurations et actuellement les configurations ne peuvent pas être partagées entre les comptes.</p>

<aside class="bcls-aside bcls-aside--tip">Vous pouvez facilement créer, répertorier et supprimer des configurations publicitaires à partir de Video Cloud Studio. Pour plus de détails, reportez-vous au document <a href="https://studio.support.brightcove.com/admin/configuring-server-side-ad-settings.html">Configuration des paramètres publicitaires côté serveur</a>.</aside> <aside class="bcls-aside bcls-aside--information">Notes :
<ul>
	<li>Pour utiliser SSAI, votre compte Video Cloud doit être configuré pour la <a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">livraison dynamique</a> et activé pour SSAI. Contactez votre gestionnaire de compte pour commencer à utiliser cette fonctionnalité.</li>
	<li>SSAI fonctionne avec la vidéo à la demande (VOD) et prend en charge la lecture en direct.</li>
	<li>Pour une liste des limitations, consultez le <a href="/getting-started/video-cloud-ssai-overview.html#Limitations">Aperçu de la SSAI</a> document.</li>
</ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="General_information">Informations générales</h2>

<p>Les informations suivantes concernent toutes les demandes d'API SSAI.</p>

<h3>URL de base</h3>

<p>L'URL de base de l'API SSAI est :</p>

<pre>
<code class="language-http" translate="No">https://ssai.api.brightcove.com/v1</code></pre>

<h4>Chemin du compte</h4>

<p>Dans tous les cas, des demandes seront faites pour un compte Video Cloud spécifique. Ainsi, vous ajouterez toujours le terme <code translate="No">accounts</code> suivi de votre identifiant de compte à l'URL de base :</p>

<pre>
<code class="language-http" translate="No">https://ssai.api.brightcove.com/v1<strong>/accounts/</strong><span class="bcls-input">your account id</span></code></pre>

<h3>Authentification</h3>

<p>L'authentification des demandes nécessite un en-tête d'autorisation :</p>

<pre>
<code class="language-http" translate="No">Authorization: Bearer <span class="bcls-input">your access token</span></code></pre>

<p>Le <code translate="No">access_token</code> est un jeton d'accès OAuth2 temporaire qui doit être obtenu à partir du service Brightcove OAuth. Pour plus d'informations sur la façon d'obtenir des informations d'identification client et de les utiliser pour récupérer des jetons d'accès, consultez la <a href="https://apis.support.brightcove.com/oauth/getting-started/overview-oauth-api-v4.html">présentation OAuth de Brightcove</a>.</p>

<h3>Opérations</h3>

<p>Lorsque vous demandez des informations d'identification client, vous devez spécifier le type d'accès au compte ou les opérations que vous souhaitez. Voici une liste des opérations actuellement prises en charge pour l'API SSAI :</p>

<ul>
	<li>Données SSAI :
	<p><code translate="No">video-cloud/ssai/read</code><br />
	<code translate="No">video-cloud/ssai/all</code></p>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Manage_ad_configurations">Gérer les configurations des annonces</h2>

<p>L'API prend en charge les requêtes GET et PUT suivantes :</p>

<ul>
	<li><a href="#List_ad_configurations">Liste des configurations d'annonces</a></li>
	<li><a href="#Create_an_ad_configuration">Créer une configuration d'annonce</a></li>
	<li><a href="#Get_ad_configuration_details">Obtenir les détails de configuration des annonces</a></li>
	<li><a href="#Update_an_ad_configuration">Mettre à jour une configuration d'annonce</a></li>
</ul>

<h3 id="List_ad_configurations">Liste des configurations d'annonces</h3>

<p>Répertorier les configurations d'annonces définies pour un compte.</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>Méthode</th>
			<td>OBTENIR</td>
		</tr>
		<tr>
			<th>URL</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/<span class="bcls-input">votre identifiant de compte</span>/ssai_configs</td>
		</tr>
		<tr>
			<th rowspan="2">En-têtes</th>
			<td>Autorisation : Porteur de <span class="bcls-input">votre jeton d'accès</span></td>
		</tr>
		<tr>
			<td>Type de contenu : application/json</td>
		</tr>
	</tbody>
</table>

<p>Exemple de réponse :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}[
  {
    "name": "VMAP Ad Server",
    "vmap_response_namespace": "bc",
    "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
    "account_id": "57838016001",
    "created_timestamp": "2017-07-24T19:28:34.976878586Z",
    "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
    "ad_config": {
      "expected_ad_response": "dfp_ad_rules",
      "disable_server_beacons": false,
      "template_url": {
          "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
      }
    }
  }
]{% endraw %}</code></pre>

<h3 id="Create_an_ad_configuration">Créer une configuration d'annonce</h3>

<p>Créer une configuration d'annonce pour un compte.</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>Méthode</th>
			<td>POSTE</td>
		</tr>
		<tr>
			<th>URL</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/<span class="bcls-input">votre identifiant de compte</span>/ssai_configs</td>
		</tr>
		<tr>
			<th rowspan="2">En-têtes</th>
			<td>Autorisation : Porteur de <span class="bcls-input">votre jeton d'accès</span></td>
		</tr>
		<tr>
			<td>Type de contenu : application/json</td>
		</tr>
	</tbody>
</table>

<p>Corps de l'échantillon :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server",
  "vmap_response_namespace": "bc",
  "ad_config": {
  	"expected_ad_response": "vast_3_0",
  	"disable_server_beacons": false,
    "round_up_cue_points": false,
  	"template_url": {
  		"template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
  	}
  },
  "discontinuities": {
    "hls": [ "*" ]
  }
}{% endraw %}</code></pre>

<h3 id="Get_ad_configuration_details">Obtenir les détails de configuration des annonces</h3>

<p>Pour un compte, obtenez les détails de configuration de l'annonce par ID de configuration.</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>Méthode</th>
			<td>OBTENIR</td>
		</tr>
		<tr>
			<th>URL</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/<span class="bcls-input">votre identifiant de compte</span>/ssai_configs/<span class="bcls-input">votre identifiant de configuration d'annonce</span></td>
		</tr>
		<tr>
			<th rowspan="2">En-têtes</th>
			<td>Autorisation : Porteur de <span class="bcls-input">votre jeton d'accès</span></td>
		</tr>
		<tr>
			<td>Type de contenu : application/json</td>
		</tr>
	</tbody>
</table>

<p>Exemple de réponse :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server",
  "vmap_response_namespace": "bc",
  "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
  "account_id": "57838016001",
  "created_timestamp": "2017-07-24T19:28:34.976878586Z",
  "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
  "ad_config": {
    "expected_ad_response": "dfp_ad_rules",
    "disable_server_beacons": false,
    "template_url": {
        "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
    }
  },
  "beacon_templates": [
      {
        "type": "content_start",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "content_midpoint",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "ad_start",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      },
      {
        "type": "content_complete",
        "template_url": {
          "template": "https://myserver.com/beaconRX/{{metadata.video_id}}/load?position=load&amp;sid={{system.xfp.unique_user_id}}&amp;jid={{metadata.video_id}}&amp;rnd32={{sytem.random_number_32}}&amp;bid={{system.uuid}}&amp;t={{system.timestamp_utc}}&amp;ua={{system.user_agent}}&amp;ip={{system.ip_address}}&amp;ref={{system.referer}}"
        }
      }
    ],
    "discontinuities": {
      "dash": [
        "*"
      ],
      "hls": [
        "*"
      ]
    },
    "extend_beacon_guard_ttl": true
  }
}{% endraw %}</code></pre>

<h3 id="Update_an_ad_configuration">Mettre à jour une configuration d'annonce</h3>

<p>Mettre à jour une configuration d'annonce par ID de configuration.</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<th>Méthode</th>
			<td>METTRE</td>
		</tr>
		<tr>
			<th>URL</th>
			<td>https://ssai.api.brightcove.com/v1/accounts/<span class="bcls-input">votre identifiant de compte</span>/ssai_configs/<span class="bcls-input">votre identifiant de configuration d'annonce</span></td>
		</tr>
		<tr>
			<th rowspan="2">En-têtes</th>
			<td>Autorisation : Porteur de <span class="bcls-input">votre jeton d'accès</span></td>
		</tr>
		<tr>
			<td>Type de contenu : application/json</td>
		</tr>
		<tr>
			<th>Corps de l'échantillon</th>
			<td>
			<pre>
<code class="language-json" translate="No">{
    "name": "VMAP Ad Server - updated"
}</code></pre>
			</td>
		</tr>
	</tbody>
</table>

<p>Exemple de réponse :</p>

<pre class="line-numbers">
<code class="language-json" translate="No">{% raw %}{
  "name": "VMAP Ad Server - updated",
  "vmap_response_namespace": "bc",
  "config_id": "2ecc6beb-d6a4-4deb-a78e-37ac27e0f883",
  "account_id": "57838016001",
  "created_timestamp": "2017-07-24T19:28:34.976878586Z",
  "updated_timestamp": "2017-07-24T19:28:34.976878586Z",
  "ad_config": {
    "expected_ad_response": "dfp_ad_rules",
    "disable_server_beacons": false,
    "template_url": {
      "template": "http://solutions.brightcove.com/bcls/ads/simple-ad-rules?ip={{ system.ip_address }}&amp;vid={{ metadata.video_id }}&amp;ppid={{ system.unique_user_id }}&amp;p_vmap={{ url.p_vmap }}"
    }
  }
}{% endraw %}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Configuration_field_details">Détails du champ de configuration</h2>

<p>Ce tableau définit les champs de configuration des annonces utilisés dans la section corps d'une requête.</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Champ</th>
			<th>Type</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">name</code></td>
			<td>Chaîne</td>
			<td>Nom lisible par l'homme</td>
		</tr>
		<tr>
			<td><code translate="No">vmap_response_namespace</code></td>
			<td>Chaîne</td>
			<td>Ajuste la sortie VMAP pour utiliser le format d'espace de noms Unicorn Once hérité ou pour utiliser le nouveau format d'espace de noms Brightcove.<br />
			<br />
			Valeurs : <code translate="No">uo</code>, <code translate="No">bc</code> Par défaut : <code translate="No">bc</code></td>
		</tr>
		<tr>
			<td><code translate="No">description</code></td>
			<td>Chaîne</td>
			<td>Description lisible par l'homme</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.expected_ad_response</code></td>
			<td>Chaîne</td>
			<td>Quelle technologie utiliser pour analyser la réponse. <sup><a href="#n1">[1]</a></sup><br />
			<br />
			Valeurs :
			<ul>
				<li><code translate="No">dfp_ad_rules</code></li>
				<li><code translate="No">dfp_vmap</code></li>
				<li><code translate="No">smart_xml</code></li>
				<li><code translate="No">vast_3_0</code></li>
			</ul>
			</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.disable_server_beacons</code></td>
			<td>Booléen</td>
			<td>Indique s'il faut désactiver le déclenchement côté serveur des impressions/balises publicitaires<br />
			<br />
			Lorsque cette valeur est définie sur <code translate="No">true</code>, SSAI ne déclenche aucune balise côté serveur et inclut toutes les balises dans la sortie VMAP<br />
			<br />
			Lorsque la valeur est définie sur <code translate="No">false</code>, SSAI déclenche les balises côté serveur et inclut toutes les balises qu'il n'est pas en mesure de le faire dans la sortie VMAP.</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.round_up_cue_points</code></td>
			<td>Booléen</td>
			<td>Indique s'il faut arrondir l'image clé suivante lors du choix d'une position à proximité pour insérer des annonces.<br />
			<br />
			Par défaut : <code translate="No">false</code>, qui choisit l'image-clé la plus proche de la position d'annonce souhaitée.</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.template_url.template</code></td>
			<td>Chaîne</td>
			<td>Modèle de balise d'annonce. Variables disponibles décrites dans une section ultérieure.</td>
		</tr>
		<tr>
			<td><code translate="No">ad_config.template_url.defaults</code></td>
			<td>Objet</td>
			<td>Mappage de chaîne à chaîne définissant la valeur par défaut à utiliser dans le cas où un paramètre url n'est pas fourni.<br />
			<br />
			Peut être un littéral <code translate="No">{ "url.foo": "SomeString" }</code><br />
			<br />
			Ou référencer une autre variable <code translate="No">{% raw %}{ "url.foo": "{{ metadata.title_id }}" }{% endraw %}</code></td>
		</tr>
		<tr>
			<td><code translate="No">discontinuities.dash</code> <sup><a href="#n2">[2]</a></sup></td>
			<td>[]String</td>
			<td>Contrôle les versions de tiret pour fournir des manifestes de tiret multipériode.<br />
			<br />
			Mis à <code translate="No">["*"]</code> pour fournir un tableau de bord à plusieurs périodes pour toutes les versions<br />
			<br />
			Liste vide pour jamais<br />
			<br />
			Exemple : <code translate="No">["live-timeline"]</code> pour livrer pour la chronologie en direct mais pas pour hbbtv</td>
		</tr>
		<tr>
			<td><code translate="No">discontinuities.hls</code> <sup><a href="#n2">[2]</a></sup></td>
			<td>[]String</td>
			<td>Contrôle les versions de hls à livrer avec des discontinuités.<br />
			<br />
			Mis à <code translate="No">["*"]</code> à la livraison avec discontinuités dans toutes les versions de HLS<br />
			<br />
			Liste vide pour jamais<br />
			<br />
			Exemple : <code translate="No">["v4","v5"]</code> à fournir pour v4 et v5, mais pas pour la v3</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates</code></td>
			<td>Tableau</td>
			<td>Un tableau de balises à tirer (exemple : balises tierces)</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates[].type</code></td>
			<td>Chaîne</td>
			<td>
			<p>Type de balise à feu. Valeurs :</p>

			<ul>
				<li><code translate="No">content_start</code></li>
				<li><code translate="No">content_first_quartile</code></li>
				<li><code translate="No">content_midpoint</code></li>
				<li><code translate="No">content_third_quartile</code></li>
				<li><code translate="No">content_complete</code></li>
				<li><code translate="No">content_quartiles</code></li>
				<li><code translate="No">content_interval</code></li>
				<li><code translate="No">ad_start</code></li>
				<li><code translate="No">ad_first_quartile</code></li>
				<li><code translate="No">ad_midpoint</code></li>
				<li><code translate="No">ad_third_quartile</code></li>
				<li><code translate="No">ad_complete</code></li>
				<li><code translate="No">ad_quartiles</code></li>
				<li><code translate="No">ad_break_start</code></li>
				<li><code translate="No">ad_break_end</code></li>
				<li><code translate="No">segment_start</code></li>
				<li><code translate="No">segment_end</code></li>
				<li><code translate="No">on_load</code></li>
			</ul>
			</td>
		</tr>
		<tr>
			<td><code translate="No">beacon_templates[].template_url.template</code></td>
			<td>Chaîne</td>
			<td>Modèle d'URL de balise</td>
		</tr>
		<tr>
			<td><code translate="No">extend_beacon_guard_ttl</code></td>
			<td>Booléen</td>
			<td>Définit la longueur de la TTL (Heure de vie) de Beacon Guard sur la durée de vie de la session du contenu. Sinon, la valeur par défaut est 1 minute.</td>
		</tr>
	</tbody>
</table>

<aside class="bcls-aside bcls-aside--information">
<p>Les notes suivantes font référence aux champs du tableau ci-dessus.</p>

<p id="n1"><sup>[1]</sup> Lorsque la valeur <code translate="No">expected_ad_response</code> est définie sur <code translate="No">vast_3_0</code>, SSAI effectue un appel VAST pour chaque point de repère publicitaire défini dans Video Cloud. Pour les règles VMAP et publicitaires, SSAI effectue des requêtes basées sur les sauts publicitaires définis dans la réponse initiale de la publicité.</p>

<p id="n2"><sup>[2]</sup> Les balises de discontinuité indiquent un changement dans l'encodage de la fréquence d'images entre le contenu vidéo et les segments publicitaires. Ils disent au système de reconstruire la chaîne de rendu. Pour un SSAI évolutif, le lecteur vidéo doit pouvoir lire HLS avec des balises Discontinuity et MPEG DASH contenant plusieurs périodes.</p>
</aside>
</section>

<section class="bcls-section">
<h2 id="Ad_variables">Variables d'annonce</h2>

<p>Les variables de l'URL du <strong>modèle</strong> sont identifiées par des accolades doubles (<code translate="No">{% raw %}{{ … }}{% endraw %}</code>) avec des espaces blancs optionnels avant et après le chemin d'accès à la variable. Toutes les variables sont préfixées par l'un des trois espaces de noms :</p>

<ul>
	<li><a href="#System_variables">système</a></li>
	<li><a href="#URL_variables">url</a></li>
	<li><a href="#Metadata_variables">métadonnées</a></li>
</ul>

<h3 id="System_variables">Variables système</h3>

<p>Les variables système sont fournies par le système SSAI et peuvent être des informations sur l'utilisateur final ou des variables auxiliaires pour générer des valeurs aléatoires. Les valeurs doivent être encodées par URI avant d'être insérées dans les modèles d'URL.</p>

<p>Les variables système sont identifiées comme suit : <code translate="No">{% raw %}{{system.*}}{% endraw %}</code></p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Champ</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">ip_address</code></td>
			<td>Adresse IP de l'utilisateur final</td>
		</tr>
		<tr>
			<td><code translate="No">random_number_32</code></td>
			<td>Entier aléatoire 32 bits</td>
		</tr>
		<tr>
			<td><code translate="No">random_guid</code></td>
			<td>UUID aléatoire</td>
		</tr>
		<tr>
			<td><code translate="No">referer</code></td>
			<td>Valeur d'en-tête Referer de l'utilisateur final</td>
		</tr>
		<tr>
			<td><code translate="No">timestamp_utc</code></td>
			<td>Heure actuelle en tant qu'horodatage unix</td>
		</tr>
		<tr>
			<td><code translate="No">unique_user_id</code></td>
			<td>MD5 (ip_address + user_agent)</td>
		</tr>
		<tr>
			<td><code translate="No">unix_timestamp</code></td>
			<td>Heure actuelle en tant qu'horodatage unix (secondes)</td>
		</tr>
		<tr>
			<td><code translate="No">user_agent</code></td>
			<td>Valeur d'en-tête User-Agent de l'utilisateur final</td>
		</tr>
		<tr>
			<td><code translate="No">uuid</code></td>
			<td>Uuid aléatoire</td>
		</tr>
		<tr>
			<td><code translate="No">x_forwarded_for</code></td>
			<td>Valeur d'en-tête X-Forwarded-For de l'utilisateur final</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.correlator</code></td>
			<td>Entier aléatoire 64 bits</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.ip_address</code></td>
			<td>Adresse IP de l'utilisateur final</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.unique_user_id</code></td>
			<td>MD5 (ip_address + user_agent)</td>
		</tr>
		<tr>
			<td><code translate="No">xfp.scor</code></td>
			<td>Entier aléatoire 64 bits</td>
		</tr>
	</tbody>
</table>

<h3 id="URL_variables">Variables d'URL</h3>

<p>Les paramètres de requête fournis sur le point d'entrée VMAP/Manifest sont disponibles sous l'espace de <code translate="No">url</code> noms. Contrairement aux variables sous d'autres espaces de noms, ces paramètres ne sont pas encodés URL lors de l'insertion dans le modèle. Si les valeurs de variables doivent être encodées en url pour le fournisseur d'annonces, elles devront être codées en double URL sur l'URL du point d'entrée.</p>

<p>Les variables d'URL sont identifiées comme suit : <code translate="No">{% raw %}{{url.*}}{% endraw %}</code></p>

<h3 id="Metadata_variables">Variables de mét</h3>

<p>Les variables de métadonnées sont celles qui décrivent la vidéo de contenu, dérivée à la fois des sources de données Video Cloud et Dynamic Delivery. Les valeurs sont encodées par URL avant d'être insérées dans les modèles d'URL.</p>

<p>Les variables de métadonnées sont identifiées comme : <code translate="No">{% raw %}{{metadata.*}}{% endraw %}</code></p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Champ</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">ad_keys</code></td>
			<td>Chaîne de texte libre pouvant être ajoutée et modifiée dans le module Media Video Cloud Studio</td>
		</tr>
		<tr>
			<td><code translate="No">{% raw %}custom_fields.{field_name}{% endraw %}</code></td>
			<td>Champs personnalisés Video Cloud</td>
		</tr>
		<tr>
			<td><code translate="No">long_description</code></td>
			<td>Description longue de Video Cloud</td>
		</tr>
		<tr>
			<td><code translate="No">name</code></td>
			<td>Nom de la vidéo Video Cloud</td>
		</tr>
		<tr>
			<td><code translate="No">reference_id</code></td>
			<td>ID de référence Video Cloud</td>
		</tr>
		<tr>
			<td><code translate="No">tags</code></td>
			<td>Liste séparée par des virgules des balises Video Cloud pour la vidéo</td>
		</tr>
		<tr>
			<td><code translate="No">title.duration</code></td>
			<td>Durée du contenu en secondes</td>
		</tr>
		<tr>
			<td><code translate="No">title.id</code></td>
			<td>ID de titre de livraison dynamique</td>
		</tr>
		<tr>
			<td><code translate="No">title.name</code></td>
			<td>Nom du titre de livraison dynamique</td>
		</tr>
		<tr>
			<td><code translate="No">video_id</code></td>
			<td>ID vidéo Video Cloud</td>
		</tr>
		<tr>
			<td colspan="2"><em>D' autres paires clé/valeur Video Cloud seraient également là</em></td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Entrypoint_URL_parameters">Paramètres d'URL d'entrée</h2>

<p>Il existe une poignée de paramètres de requête qui peuvent être ajoutés à l'URL du point d'entrée SSAI (VMAP ou manifeste) afin de modifier certains comportements :</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th width="25%">Paramètre</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">?rule=sd-only</code></td>
			<td>Filtre tout format associé vidéo dont la hauteur est inférieure au seuil défini dans la configuration du compte</td>
		</tr>
		<tr>
			<td><code translate="No">?rule=discos-enabled</code></td>
			<td>Activer la lecture avec les discontinuités dans HLS et MultiPériodes dans le tableau de bord. Prend priorité sur les paramètres de discontinuités dans la configuration de lecture</td>
		</tr>
		<tr>
			<td><code translate="No">?rule=discos-disabled</code></td>
			<td>Désactivez la lecture avec les discontinuités dans HLS et MultiPodes dans le tiret. Prend priorité sur les paramètres de discontinuités dans la configuration de lecture</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Configuration_notes">Notes de configuration</h2>

<ol>
	<li>Le préchargement des annonces ne doit pas être effectué avec SSAI. La raison en est que si vous préchargez le lecteur signalera une impression d'annonce et probablement les premières balises de quartile avant la lecture de la vidéo. Cela pourrait conduire à des analyses publicitaires inexactes. Si vous configurez SSAI dans Studio, cela sera automatiquement fait, mais si vous configurez SSAI manuellement, vous devez être conscient de ce problème.</li>
	<li>Si le lecteur Web utilise SSAI et que l'une de vos motivations est de contourner les bloqueurs d'annonces, vous devez utiliser des balises côté serveur. Les balises côté client ne doivent pas être utilisées car elles seront bloquées.</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Client_side_macros">Macros côté client</h2>

<p>Utilisez le <code translate="No">page</code> préfixe lorsque vous souhaitez utiliser des macros publicitaires côté client. Ces macros vous permettent d'utiliser des variables dans les URL VMAP et serveur. Pour plus de détails sur les macros <a href="https://player.support.brightcove.com/plugins/advertising-ima3-plugin.html#Ad_macros_and_the_serverUrl">publicitaires, reportez-vous à la</a> section Macros Ad et ServerURL du document Advertising with the IMA3 Plugin.</p>
<!-- <p>
              When you prefix an Ad variable with , then a client-side macro will be appended to the end of the VMAP and SRC fields in the catalog response, when SSAI is being used. Then, the Brightcove player will run those strings through the client-side macro replacement logic.
            </p> -->

<p>Les macros côté client sont préfixées par : <code translate="No">{% raw %}{{page.*}}{% endraw %}</code></p>

<p>Par exemple, pour ajouter la variable <code translate="No">document.referrer</code> et une fenêtre <code translate="No">pageVariable</code> DOM, vous devez les préfixer avec <code translate="No">page</code> dans le modèle d'annonce comme suit :</p>

<pre>
<code class="language-html" translate="No">{% raw %}https://adserver.com/{{page.document.referrer}}/{{page.pageVariable.whateverIwant}}{% endraw %}</code></pre>

<p>L'API de lecture renvoie <code translate="No">document.referrer</code> et <code translate="No">pageVariable.whateverIwant</code> ajoute aux URL VMAP et SRC. Le lecteur Brightcove exécute ensuite sa logique de remplacement de macro côté client pour remplacer les valeurs appropriées, avant d'envoyer la requête :</p>

<pre>
<code class="language-html" translate="No">{% raw %}https://bolt-prefix/blah.vmap?document.referrer={document.referrer}&amp;pageVariable.whateverIwant={pageVariable.whateverIwant}{% endraw %}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Ad_error_beacons">Balises d'erreur d'annonce</h2>

<p>Les balises d'erreur de publicité VAST lors de l'utilisation de SSAI peuvent être utiles pour rechercher et résoudre de manière proactive les problèmes liés à votre flux de travail publicitaire. Pour plus de détails, consultez le <a href="/vod/guides/ad-error-beacons-ssai.html">Balises d'erreur publicitaire avec SSAI</a> document.</p>
</section>
</article>